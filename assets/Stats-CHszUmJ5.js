import{d as A,u as B,r as D,v as S,c as m,w as r,a as n,e as T,o as g,b as u,I as k,f as t,h as M,i as N,F as Q,j as V,k as E,a1 as F,a5 as P,a6 as j,q as w,t as l,a7 as q,a8 as H,_ as L}from"./index-BF6eoYIG.js";import{t as p}from"./Queries-CVDLI_LO.js";const R={id:"main"},W={class:"flex flex-wrap gap-4 mt-8"},z={class:"ml-2 opacity-60"},G={class:"mt-3"},J={class:"stats-table text-sm w-full"},K={class:"text-right"},O={class:"text-right"},U={class:"text-right"},X={class:"text-right"},Y=A({__name:"Stats",setup(Z){B();const c=T.getEvolu(),d=D(),v=S(()=>d.value?d.value.map(e=>{const s=e.infusions.length,a=s,b=e.infusions.reduce((i,o)=>{if(o.endedAt&&o.createdAt){const f=new Date(o.endedAt).getTime()-new Date(o.createdAt).getTime();return i+f}return i},0),h=s>0?b/1e3/s:0,_=e.infusions.reduce((i,o)=>i+o.brews.length,0),I=e.infusions.reduce((i,o)=>i+o.brews.reduce((f,C)=>f+(C.length??0),0),0),x=_>0?I/1e3/_:0,y=s>0?_/s:0;return{...e,stats:{total_infusions:Math.floor(a),average_infusion_duration:Math.floor(h/60),average_brew_duration:Math.floor(x),average_brews_per_infusion:Math.floor(y)}}}):null);return c.loadQuery(p).then(({rows:e})=>{d.value=e,console.log(v.value)}),c.subscribeQuery(p)(()=>{const{rows:e}=c.getQuery(p);d.value=e}),(e,s)=>(g(),m(n(E),null,{default:r(()=>[u(n(k)),u(n(V),{class:"ion-padding"},{default:r(()=>[t("main",R,[s[4]||(s[4]=t("h1",null,"Stats",-1)),t("div",W,[(g(!0),M(Q,null,N(v.value,a=>(g(),m(n(F),{color:"secondary",class:"px-2 py-1 w-[19rem]"},{default:r(()=>[u(n(P),null,{default:r(()=>[u(n(j),{class:"font-semibold"},{default:r(()=>[w(l(a.title),1)]),_:2},1024),u(n(q),{class:"opacity-75 font-normal"},{default:r(()=>[w(l(a.subtitle??"â€“")+" ",1),t("span",z,"("+l(a.typeName)+")",1)]),_:2},1024)]),_:2},1024),u(n(H),{class:"mt-0.5 border-t border-gray-500"},{default:r(()=>[t("div",G,[t("table",J,[t("tr",null,[s[0]||(s[0]=t("td",{class:"pr-1"},"Total infusions:",-1)),t("td",K,l(a.stats.total_infusions),1)]),t("tr",null,[s[1]||(s[1]=t("td",{class:"pr-1"},"Avg brew duration:",-1)),t("td",O,l(a.stats.average_brew_duration)+"s",1)]),t("tr",null,[s[2]||(s[2]=t("td",{class:"pr-1"},"Avg brews per infusion:",-1)),t("td",U,l(a.stats.average_brews_per_infusion),1)]),t("tr",null,[s[3]||(s[3]=t("td",{class:"pr-1"},"Avg infusion duration:",-1)),t("td",X,l(a.stats.average_infusion_duration)+"s",1)])])])]),_:2},1024)]),_:2},1024))),256))])])]),_:1})]),_:1}))}}),st=L(Y,[["__scopeId","data-v-e6d6dd12"]]);export{st as default};
